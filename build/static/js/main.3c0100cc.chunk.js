(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n(140),i=n(1),a=n.n(i),s=n(85),o=n.n(s),l=n(142),d=n(90),j=n(11),u=n.n(j),b=n(19),h=n(5),O=n(122),p=n(144),x=n(145),m=n(123),f=n(124),g=n(50),v=n(127),w=n(128),k=n(91),y=n(49),S=n(28),C=n(63),I=(n(103),n(107),C.a.initializeApp({apiKey:"AIzaSyBksRCaqUR2vDBUxaTW08bMJx48DM2HASA",authDomain:"shopping-list-f52ac.firebaseapp.com",databaseURL:"https://shopping-list-f52ac.firebaseio.com",projectId:"shopping-list-f52ac",storageBucket:"shopping-list-f52ac.appspot.com",messagingSenderId:"781294422164",appId:"1:781294422164:web:362d6d0992ba9f0a230c81",measurementId:"G-3LQBH09FNV"}).auth()),q=C.a.database().ref(),U=C.a.database(),F=(q.child("items"),q.child("users"),q.child("lists")),R=a.a.createContext(null);function E(){return Object(i.useContext)(R)}function L(e){var t=e.children,n=Object(i.useState)(null),r=Object(h.a)(n,2),a=r[0],s=r[1];Object(i.useEffect)((function(){return I.onAuthStateChanged((function(e){e&&s(e)}))}),[]);var o={loggedInUser:a,signUpFn:function(e,t){return function(e,t){return I.createUserWithEmailAndPassword(e,t).then((function(e){var t,n;return U.ref("users/"+(null===(t=e.user)||void 0===t?void 0:t.uid)).set({id:null===(n=e.user)||void 0===n?void 0:n.uid})}))}(e,t)},loginFn:function(e,t){return function(e,t){return I.signInWithEmailAndPassword(e,t)}(e,t)},logoutFn:function(){return I.signOut()}};return Object(c.jsxs)(R.Provider,{value:o,children:[" ",t]})}var N=function(){var e=Object(y.a)(),t=e.register,n=e.handleSubmit,r=e.errors,a=Object(i.useState)(""),s=Object(h.a)(a,2),o=s[0],l=s[1],d=Object(i.useState)(!1),j=Object(h.a)(d,2),C=j[0],I=j[1],q=E(),U=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,null===q||void 0===q?void 0:q.signUpFn(t.email,t.password);case 4:console.log(null===q||void 0===q?void 0:q.loggedInUser),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l("Could not create user");case 10:I(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{p:"3",children:[Object(c.jsx)(p.a,{children:o&&Object(c.jsxs)(x.a,{status:"error",children:[Object(c.jsx)(x.c,{}),Object(c.jsx)(x.d,{mr:2,children:"Oh no!"}),Object(c.jsx)(x.b,{children:o}),Object(c.jsx)(m.a,{position:"absolute",right:"8px",top:"8px"})]})}),Object(c.jsx)(f.a,{children:Object(c.jsxs)("form",{onSubmit:n(U),children:[Object(c.jsxs)(g.a,{id:"email-address",isRequired:!0,children:[Object(c.jsx)(v.a,{children:"Email address"}),Object(c.jsx)(w.a,{colorScheme:"pink",name:"email",ref:t({required:!0}),placeholder:"Email...",disabled:C}),Object(c.jsx)(g.b,{children:r.email&&Object(c.jsx)("span",{children:"Email is required."})})]}),Object(c.jsxs)(g.a,{id:"password",isRequired:!0,children:[Object(c.jsx)(v.a,{children:"Password"}),Object(c.jsx)(w.a,{colorScheme:"pink",name:"password",ref:t({required:!0}),type:"password",disabled:C}),Object(c.jsx)(g.b,{children:r.password&&Object(c.jsx)("span",{children:"Password is required."})})]}),Object(c.jsxs)(g.a,{id:"password-confirmation",isRequired:!0,children:[Object(c.jsx)(v.a,{children:"Password Confirmation"}),Object(c.jsx)(w.a,{colorScheme:"pink",name:"passwordConfirmation",ref:t({required:!0}),type:"password",disabled:C}),Object(c.jsx)(g.b,{children:r.passwordConfirmation&&Object(c.jsx)("span",{children:"Password confirmation is required."})})]}),Object(c.jsx)(k.a,{colorScheme:"pink",isFullWidth:!0,type:"submit",disabled:C,children:"Sign-up"}),Object(c.jsx)(S.b,{to:"/login",children:Object(c.jsx)(k.a,{colorScheme:"gray",isFullWidth:!0,children:"Go to Login"})})]})})]})},P=n(18),z=function(){var e=Object(y.a)(),t=e.register,n=e.handleSubmit,r=e.errors,a=Object(i.useState)(""),s=Object(h.a)(a,2),o=s[0],l=s[1],d=Object(i.useState)(!1),j=Object(h.a)(d,2),C=j[0],I=j[1],q=Object(P.g)(),U=E(),F=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(""),I(!0),e.next=5,null===U||void 0===U?void 0:U.loginFn(t.email,t.password);case 5:q.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l("Could not login user");case 11:I(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(O.a,{p:"3",children:[Object(c.jsxs)(p.a,{children:[o&&Object(c.jsxs)(x.a,{status:"error",children:[Object(c.jsx)(x.c,{}),Object(c.jsx)(x.d,{mr:2,children:"Oh no!"}),Object(c.jsx)(x.b,{children:o}),Object(c.jsx)(m.a,{position:"absolute",right:"8px",top:"8px"})]}),(null===U||void 0===U?void 0:U.loggedInUser)&&Object(c.jsx)("div",{children:U.loggedInUser.email})]}),Object(c.jsx)(f.a,{children:Object(c.jsxs)("form",{onSubmit:n(F),children:[Object(c.jsxs)(g.a,{id:"email-address",isRequired:!0,children:[Object(c.jsx)(v.a,{children:"Email address"}),Object(c.jsx)(w.a,{colorScheme:"pink",name:"email",ref:t({required:!0}),placeholder:"Email...",disabled:C}),Object(c.jsx)(g.b,{children:r.email&&Object(c.jsx)("span",{children:"Email is required."})})]}),Object(c.jsxs)(g.a,{id:"password",isRequired:!0,children:[Object(c.jsx)(v.a,{children:"Password"}),Object(c.jsx)(w.a,{colorScheme:"pink",name:"password",ref:t({required:!0}),type:"password",disabled:C}),Object(c.jsx)(g.b,{children:r.password&&Object(c.jsx)("span",{children:"Password is required."})})]}),Object(c.jsx)(k.a,{colorScheme:"pink",isFullWidth:!0,type:"submit",disabled:C,children:"Login"}),Object(c.jsx)(S.b,{to:"/signup",children:Object(c.jsx)(k.a,{colorScheme:"pink",isFullWidth:!0,children:"Sign up"})})]})})]})},T=n(13),W=n(130),B=n(40),A=n(131),D=n(132),J=n(141),M=n(134),G=n(51),H=n(133),K=n(135),Q=function(e){var t=e.count,n=e.onChange;return Object(c.jsx)(W.a,{p:1,children:Object(c.jsxs)(A.a,{align:"center",justify:"center",children:[Object(c.jsx)(D.a,{variant:"outline",m:"1","aria-label":"Reduce quantity",icon:Object(c.jsx)(H.a,{}),isRound:!0,size:"sm",onClick:function(){return n(t-1)}}),Object(c.jsx)(M.a,{m:"1",fontSize:"md",children:t}),Object(c.jsx)(D.a,{variant:"outline",m:"1","aria-label":"Increase quantity",icon:Object(c.jsx)(K.a,{}),isRound:!0,size:"sm",onClick:function(){return n(t+1)}})]})})},V=n(136),X=function(e){var t=e.item,n=e.deleteItem,r=e.currentListId;return Object(c.jsxs)(A.a,{bg:t.itemIsChecked?"green.100":"white",p:4,rounded:"md",boxShadow:"xl",color:"black",maxW:"400px",justify:"center",align:"center",children:[Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(D.a,{size:"lg","aria-label":"Item type icon",icon:function(e){switch(e){case"Fresh":return Object(c.jsx)(G.a,{});case"Frozen":return Object(c.jsx)(G.d,{});case"Cupboard":return Object(c.jsx)(G.c,{});case"Other":return Object(c.jsx)(G.b,{});default:return Object(c.jsx)(G.a,{})}}(t.itemType),isRound:!0})}),Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(J.a,{defaultChecked:t.itemIsChecked,isChecked:t.itemIsChecked,colorScheme:"gray",onChange:function(e){return n=e.target.checked,void q.child("lists/".concat(r,"/items/").concat(t.id)).set(Object(B.a)(Object(B.a)({},t),{},{itemIsChecked:n}));var n},children:Object(c.jsx)(M.a,{size:"md",children:t.itemName})})}),Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(Q,{count:t.quantityRequired,onChange:function(e){return function(e){q.child("lists/".concat(r,"/items/").concat(t.id)).set(Object(B.a)(Object(B.a)({},t),{},{quantityRequired:e}))}(e)}})}),Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(D.a,{size:"sm",color:"red.500",bg:"red.100","aria-label":"Delete item",icon:Object(c.jsx)(V.a,{}),isRound:!0,onClick:function(){return n()}})})]})},$=n(137),Y=n(138),Z=function(e){var t=e.addItemToList,n=Object(y.a)(),r=n.register,i=n.handleSubmit,a=n.errors;return Object(c.jsx)(W.a,{m:"0",p:4,children:Object(c.jsx)(A.a,{align:"center",justify:"center",children:Object(c.jsxs)("form",{onSubmit:i((function(e){e.itemIsChecked=!1,e.quantityRequired=1,t(e)})),children:[Object(c.jsxs)(W.a,{p:"2",children:[Object(c.jsxs)($.a,{bg:"pink",color:"black",focusBorderColor:"pink",name:"itemType",ref:r({required:!0}),placeholder:"Select type",children:[Object(c.jsx)("option",{value:"Fresh",children:"Fresh"}),Object(c.jsx)("option",{value:"Frozen",children:"Frozen"}),Object(c.jsx)("option",{value:"Cupboard",children:"Cupboard"}),Object(c.jsx)("option",{value:"Other",children:"Other"})]}),a.itemType&&Object(c.jsx)("span",{children:"This field is required"})]}),Object(c.jsxs)(W.a,{p:"2",children:[Object(c.jsx)(w.a,{variant:"filled",bg:"white",color:"black",name:"itemName",placeholder:"Enter new item here...",ref:r({required:!0})}),a.itemName&&Object(c.jsx)("span",{children:"This field is required"})]}),Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(k.a,{type:"submit",leftIcon:Object(c.jsx)(Y.a,{}),colorScheme:"pink",variant:"solid",children:"Add item"})})]})})})},_=function(e){var t=e.lists,n=e.updateSelection;return Object(c.jsx)(W.a,{p:1,children:Object(c.jsx)($.a,{placeholder:"Select an available list",onChange:function(e){return n(e.target.value)},children:t.map((function(e,t){return Object(c.jsx)("option",{value:e.id,children:e.name},"".concat(e.id,".").concat(t))}))})})},ee=function(e){var t=e.createNewList,n=Object(i.useRef)(null);return Object(c.jsx)(W.a,{p:1,children:Object(c.jsxs)(p.a,{spacing:"4",children:[Object(c.jsxs)(g.a,{id:"listName",children:[Object(c.jsx)(v.a,{children:"List name"}),Object(c.jsx)(w.a,{name:"listName",ref:n,placeholder:"enter a name...",isRequired:!0})]}),Object(c.jsx)(k.a,{variant:"outline",colorScheme:"teal",onClick:function(){var e,c;return t(null!==(e=null===(c=n.current)||void 0===c?void 0:c.value)&&void 0!==e?e:"Unset List Name")},children:"Create new list"})]})})},te=function(){var e=Object(i.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(""),s=Object(h.a)(a,2),o=s[0],l=s[1],d=Object(i.useState)([]),j=Object(h.a)(d,2),O=j[0],x=j[1],m=E(),f=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.child("lists/".concat(o,"/items/").concat(t)).remove();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=F.push({name:t,items:[],createdBy:null===m||void 0===m?void 0:m.loggedInUser.uid,users:[null===m||void 0===m?void 0:m.loggedInUser.uid]}),l(null!==(n=c.key)&&void 0!==n?n:"unset"),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){try{q.child("lists/".concat(o,"/items")).on("value",(function(e){var t=e.val(),n=[];for(var c in t)n.push({id:c,itemName:t[c].itemName,itemType:t[c].itemType,itemIsChecked:t[c].itemIsChecked,quantityRequired:t[c].quantityRequired});r(n)}))}catch(e){throw new Error(e)}}(),function(){try{F.on("value",(function(e){var t=e.val(),n=[];for(var c in t)t[c].createdBy===(null===m||void 0===m?void 0:m.loggedInUser.uid)&&n.push({id:c,name:t[c].name});x(n)}))}catch(e){throw new Error(e)}}(),function(){F.off(),q.child("lists/".concat(o,"/items")).off()}}),[o,null===m||void 0===m?void 0:m.loggedInUser.uid]),Object(c.jsxs)(W.a,{p:"2",minWidth:"50%",maxWidth:"75%",marginX:"auto",children:[Object(c.jsx)(ee,{createNewList:function(e){return g(e)}}),Object(c.jsx)(_,{lists:O,updateSelection:function(e){return l(e)}}),Object(c.jsxs)(W.a,{bg:"gray.50",height:"75vh",m:"1",children:[Object(c.jsx)(Z,{addItemToList:function(e){r([].concat(Object(T.a)(n),[e])),q.child("lists/".concat(o,"/items")).push(e)}}),Object(c.jsx)(p.a,{justifyContent:"center",children:n.map((function(e,t){return Object(c.jsx)(X,{item:e,deleteItem:function(){return f(e.id)},currentListId:o},"".concat(t,".").concat(e.itemName))}))})]})]})},ne=n(143),ce=function(){var e=Object(i.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),s=Object(h.a)(a,2),o=s[0],l=s[1],d=E(),j=Object(i.useState)(!1),g=Object(h.a)(j,2),v=g[0],w=g[1],y=Object(P.g)(),S=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(""),w(!0),e.next=5,null===d||void 0===d?void 0:d.logoutFn();case 5:y.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r("Could not logout user");case 11:w(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return v?Object(c.jsx)(ne.a,{isIndeterminate:!0}):o?Object(c.jsx)(O.a,{width:"1200px",alignContent:"center",justifyContent:"center",children:Object(c.jsx)(f.a,{bg:"gray.300",color:"white",rounded:"lg",children:Object(c.jsxs)(p.a,{width:"100%",spacing:4,children:[n&&Object(c.jsxs)(x.a,{status:"error",children:[Object(c.jsx)(x.c,{}),Object(c.jsx)(x.d,{mr:2,children:"Oh no!"}),Object(c.jsx)(x.b,{children:n}),Object(c.jsx)(m.a,{position:"absolute",right:"8px",top:"8px"})]}),Object(c.jsx)(M.a,{children:"Profile"}),Object(c.jsxs)(M.a,{children:[" ",(null===d||void 0===d?void 0:d.loggedInUser)&&d.loggedInUser.email]}),Object(c.jsx)(k.a,{onClick:function(){return l(!1)},children:"Cancel"}),Object(c.jsx)(k.a,{onClick:function(){return console.log("save")},children:"Save"})]})})}):Object(c.jsx)(O.a,{width:"1200px",alignContent:"center",justifyContent:"center",children:Object(c.jsx)(f.a,{bg:"gray.300",color:"white",rounded:"lg",children:Object(c.jsxs)(p.a,{width:"100%",spacing:4,children:[Object(c.jsx)(M.a,{children:"Profile"}),Object(c.jsxs)(M.a,{children:[" ",(null===d||void 0===d?void 0:d.loggedInUser)&&d.loggedInUser.email]}),Object(c.jsx)(k.a,{onClick:function(){return S()},children:"Log out"}),Object(c.jsx)(k.a,{onClick:function(){return l(!0)},children:"Edit profile"})]})})})},re=n(92),ie=function(e){var t=e.component,n=Object(re.a)(e,["component"]),r=E();return Object(c.jsx)(P.b,Object(B.a)(Object(B.a)({},n),{},{render:function(e){return(null===r||void 0===r?void 0:r.loggedInUser)&&r.loggedInUser.email?Object(c.jsx)(t,Object(B.a)({},e)):Object(c.jsx)(P.a,{to:"/login"})}}))},ae=n(139),se=n(146),oe=n(89),le=function(){var e,t=E(),n=Object(P.g)(),r=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===t||void 0===t?void 0:t.logoutFn();case 3:n.push("/login"),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(A.a,{align:"center",p:"2",m:"2",justify:"center",bg:"teal.400",children:[Object(c.jsx)(W.a,{p:"2",children:Object(c.jsx)(S.b,{to:"/",children:Object(c.jsx)(D.a,{bg:"gray.200",color:"pink.400",size:"lg","aria-label":"Item type icon",icon:Object(c.jsx)(oe.a,{})})})}),Object(c.jsx)(ae.a,{}),Object(c.jsxs)(A.a,{align:"center",justify:"flex-end",children:[(null===t||void 0===t?void 0:t.loggedInUser)?Object(c.jsx)(k.a,{m:"2",variant:"solid",colorScheme:"pink",onClick:function(){return r()},children:"Logout"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(S.b,{to:"/login",children:Object(c.jsx)(k.a,{m:"2",variant:"solid",colorScheme:"pink",children:"Login"})}),Object(c.jsx)(S.b,{to:"/signup",children:Object(c.jsx)(k.a,{m:"2",variant:"solid",colorScheme:"pink",children:"Sign up"})})]}),Object(c.jsx)(se.a,{m:"2",name:null!==(e=(null===t||void 0===t?void 0:t.loggedInUser)&&t.loggedInUser.displayName)&&void 0!==e?e:"Not suppled",bg:"gray.200"})]})]})},de=function(){return Object(c.jsx)(l.a,{theme:d.b,children:Object(c.jsx)(S.a,{children:Object(c.jsxs)(L,{children:[Object(c.jsx)(le,{}),Object(c.jsxs)(P.d,{children:[Object(c.jsx)(ie,{exact:!0,path:"/",component:te}),Object(c.jsx)(P.b,{path:"/signup",children:Object(c.jsx)(N,{})}),Object(c.jsx)(P.b,{path:"/login",children:Object(c.jsx)(z,{})}),Object(c.jsx)(P.b,{path:"/profile",children:Object(c.jsx)(ce,{})})]})]})})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(c.jsxs)(i.StrictMode,{children:[Object(c.jsx)(r.a,{}),Object(c.jsx)(de,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),je()}},[[115,1,2]]]);
//# sourceMappingURL=main.3c0100cc.chunk.js.map